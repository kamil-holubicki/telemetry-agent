usage: ./call-home.sh OPTIONS

Collects telemetry information and sends it to a Telemetry service. The data collection
may be disabled via setting an environment variable [PERCONA_TELEMETRY_DISABLE=1].

The script validates only if mandatory parameters are provided.
It does not validate the validity and itegritiy of provided parameters.

The data will be sent to https://127.0.0.1.nip.io/v1/telemetry/GenericReport in a JSON format.

OPTIONS can be:

  -h  Show this message

  -f  [PERCONA_PRODUCT_FAMILY]          Product family identifier.                                  [REQUIRED]
  -v  [PERCONA_PRODUCT_VERSION]         Product version.                                            [REQUIRED]
  -s  [PERCONA_OPERATING_SYSTEM]        Operating system identifier.                                [REQUIRED]
  -d  [PERCONA_DEPLOYMENT_METHOD]       Deployment method.                                          [REQUIRED]
  -i  [PERCONA_INSTANCE_ID]             Instance id                                                 [Default: autogenerated]
  -j  [PERCONA_INSTANCE_ID_FILE_PATH]   Path of the file where to store the unique ID of this node. [Default: /tmp/telemetry_uuid]
  -u  [PERCONA_TELEMETRY_URL]           Percona Telemetry Service endpoint                          [Default: https://127.0.0.1.nip.io/v1/telemetry/GenericReport]
  -t  [PERCONA_SEND_TIMEOUT]            Default timeout for the curl command.                       [Default: 10]

For example,
on a CentOS7, you may run the script as:

./call-home.sh -f "PRODUCT_FAMILY_MYSQL" -v "8.0.33" -s "$(cat /etc/redhat-release)" -i "13f5fc62-35b4-4716-b3e6-96c761fc204d" -j /tmp/percona.telemetry -u "https://TO/DO/PROVIDE/ENDPOINT -t 1

on Ubuntu, you may run the script as:
./call-home.sh -f "PRODUCT_FAMILY_MYSQL" -v "8.0.33" -s "$(cat /etc/issue)" -i "13f5fc62-35b4-4716-b3e6-96c761fc204d" -j /tmp/percona.telemetry -u "https://TO/DO/PROVIDE/ENDPOINT -t 1
